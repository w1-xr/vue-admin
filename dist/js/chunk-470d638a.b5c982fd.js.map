{"version":3,"sources":["webpack:///./src/views/order/List.vue?a9c0","webpack:///./src/views/order/List.vue?ba81","webpack:///src/views/order/List.vue","webpack:///./src/views/order/List.vue?4444","webpack:///./src/views/order/List.vue","webpack:///./src/api/order.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","directives","name","rawName","value","expression","staticStyle","attrs","orders","scopedSlots","_u","key","fn","props","_v","_s","row","order","id","user","film","arrangement","seats","price","createAt","payAt","scope","status","_e","on","$event","handle1","$index","dialogFormVisible","form","model","callback","$$v","$set","slot","submit","staticRenderFns","loading","oid","reason","reviewer","loadOrderList","methods","then","res","success","setTimeout","data","index","console","log","$message","type","message","component","FindAllOrder","url","method","UpdateOrder","CreateOrderException","HandleOrderException","ListOrderException"],"mappings":"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","file":"js/chunk-470d638a.b5c982fd.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=style&index=0&id=8759f170&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"main\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.orders}},[_c('el-table-column',{attrs:{\"type\":\"expand\"},scopedSlots:_vm._u([{key:\"default\",fn:function(props){return [_c('el-form',{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",\"inline\":\"\"}},[_c('el-form-item',{attrs:{\"label\":\"订单ID：\"}},[_c('span',[_vm._v(_vm._s(props.row.order.id))])]),_c('el-form-item',{attrs:{\"label\":\"用户ID：\"}},[_c('span',[_vm._v(_vm._s(props.row.user.id))])]),_c('el-form-item',{attrs:{\"label\":\"电影ID：\"}},[_c('span',[_vm._v(_vm._s(props.row.film.id))])]),_c('el-form-item',{attrs:{\"label\":\"场次ID：\"}},[_c('span',[_vm._v(_vm._s(props.row.arrangement.id))])]),_c('el-form-item',{attrs:{\"label\":\"电影名：\"}},[_c('span',[_vm._v(\"《 \"+_vm._s(props.row.film.name)+\" 》\")])]),_c('el-form-item',{attrs:{\"label\":\"座位号：\"}},[_c('span',[_vm._v(_vm._s(props.row.order.seats))])]),_c('el-form-item',{attrs:{\"label\":\"订单金额：\"}},[_c('span',[_vm._v(_vm._s(props.row.order.price))])]),_c('el-form-item',{attrs:{\"label\":\"下单时间：\"}},[_c('span',[_vm._v(_vm._s(props.row.order.createAt))])]),_c('el-form-item',{attrs:{\"label\":\"支付时间：\"}},[_c('span',[_vm._v(_vm._s(props.row.order.payAt))])])],1)]}}])}),_c('el-table-column',{attrs:{\"label\":\"订单 ID\",\"width\":\"400\",\"prop\":\"order.id\"}}),_c('el-table-column',{attrs:{\"width\":\"200\",\"label\":\"订单金额\",\"prop\":\"order.price\"}}),_c('el-table-column',{attrs:{\"label\":\"订单状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.order.status === 2)?_c('el-tag',{attrs:{\"type\":\"success\"}},[_vm._v(\"支付成功\")]):_vm._e(),(scope.row.order.status === 0)?_c('el-tag',{attrs:{\"type\":\"info\"}},[_vm._v(\"等待支付\")]):_vm._e(),(scope.row.order.status === 3)?_c('el-tag',{attrs:{\"type\":\"warning\"}},[_vm._v(\"已被撤销\")]):_vm._e(),(scope.row.order.status === 1)?_c('el-tag',{attrs:{\"type\":\"danger\"}},[_vm._v(\"支付失败\")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"250\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"small\",\"type\":\"warning\",\"icon\":\"el-icon-refresh-right\",\"disabled\":scope.row.order.status === 3,\"plain\":\"\"},on:{\"click\":function($event){return _vm.handle1(scope.$index, scope.row.order)}}},[_vm._v(\"删除订单 \")])]}}])})],1),_c('el-dialog',{attrs:{\"title\":\"上报异常表单\",\"visible\":_vm.dialogFormVisible},on:{\"update:visible\":function($event){_vm.dialogFormVisible=$event}}},[_c('el-form',{staticStyle:{\"width\":\"400px\"},attrs:{\"model\":_vm.form}},[_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"上报人\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.reason),callback:function ($$v) {_vm.$set(_vm.form, \"reason\", $$v)},expression:\"form.reason\"}})],1),_c('el-form-item',{staticStyle:{\"width\":\"100%\"},attrs:{\"label\":\"上报原因\",\"label-width\":\"120px\"}},[_c('el-input',{attrs:{\"autocomplete\":\"off\"},model:{value:(_vm.form.reviewer),callback:function ($$v) {_vm.$set(_vm.form, \"reviewer\", $$v)},expression:\"form.reviewer\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogFormVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submit}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"main\">\n\n    <el-table\n        v-loading=\"loading\"\n        :data=\"orders\"\n        style=\"width: 100%\">\n      <el-table-column type=\"expand\">\n        <template slot-scope=\"props\">\n          <el-form label-position=\"left\" inline class=\"demo-table-expand\">\n            <el-form-item label=\"订单ID：\">\n              <span>{{ props.row.order.id }}</span>\n            </el-form-item>\n            <el-form-item label=\"用户ID：\">\n              <span>{{ props.row.user.id }}</span>\n            </el-form-item>\n            <el-form-item label=\"电影ID：\">\n              <span>{{ props.row.film.id }}</span>\n            </el-form-item>\n            <el-form-item label=\"场次ID：\">\n              <span>{{ props.row.arrangement.id }}</span>\n            </el-form-item>\n            <el-form-item label=\"电影名：\">\n              <span>《 {{ props.row.film.name }} 》</span>\n            </el-form-item>\n            <el-form-item label=\"座位号：\">\n              <span>{{ props.row.order.seats }}</span>\n            </el-form-item>\n            <el-form-item label=\"订单金额：\">\n              <span>{{ props.row.order.price }}</span>\n            </el-form-item>\n            <el-form-item label=\"下单时间：\">\n              <span>{{ props.row.order.createAt }}</span>\n            </el-form-item>\n            <el-form-item label=\"支付时间：\">\n              <span>{{ props.row.order.payAt }}</span>\n            </el-form-item>\n          </el-form>\n        </template>\n      </el-table-column>\n      <el-table-column\n          label=\"订单 ID\"\n          width=\"400\"\n          prop=\"order.id\">\n      </el-table-column>\n      <el-table-column\n          width=\"200\"\n          label=\"订单金额\"\n          prop=\"order.price\">\n      </el-table-column>\n      <el-table-column label=\"订单状态\">\n        <template slot-scope=\"scope\">\n          <el-tag v-if=\"scope.row.order.status === 2\" type=\"success\">支付成功</el-tag>\n          <el-tag v-if=\"scope.row.order.status === 0\" type=\"info\">等待支付</el-tag>\n          <el-tag v-if=\"scope.row.order.status === 3\" type=\"warning\">已被撤销</el-tag>\n          <el-tag v-if=\"scope.row.order.status === 1\" type=\"danger\">支付失败</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" width=\"250\">\n        <template slot-scope=\"scope\">\n          <el-button @click=\"handle1(scope.$index, scope.row.order)\" size=\"small\" type=\"warning\"\n                     icon=\"el-icon-refresh-right\"\n                     :disabled=\"scope.row.order.status === 3\"\n                     plain>删除订单\n          </el-button>\n          <!-- <el-button @click=\"handle2(scope.$index, scope.row.order)\" size=\"small\" type=\"danger\"\n                     icon=\"el-icon-circle-close\"\n                     plain>上报异常\n          </el-button> -->\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <el-dialog title=\"上报异常表单\" :visible.sync=\"dialogFormVisible\">\n      <el-form :model=\"form\" style=\"width: 400px\">\n        <el-form-item style=\"width: 100%\" label=\"上报人\" label-width=\"120px\">\n          <el-input v-model=\"form.reason\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item style=\"width: 100%\" label=\"上报原因\" label-width=\"120px\">\n          <el-input v-model=\"form.reviewer\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\n        <el-button type=\"primary\" @click=\"submit\">确 定</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport {CreateOrderException, FindAllOrder, UpdateOrder} from \"@/api/order\";\n\nexport default {\n\n  data() {\n    return {\n      loading: false,\n      dialogFormVisible: false,\n      orders: [],\n      form: {\n        oid: '',\n        reason: '',\n        reviewer: '',\n      },\n    }\n  },\n\n  mounted() {\n    this.loadOrderList()\n  },\n\n  methods: {\n\n    loadOrderList() {\n      this.loading = true\n      FindAllOrder().then(res => {\n        if (res.success) {\n          setTimeout(() => {\n            this.orders = res.data\n            this.loading = false\n          }, 700)\n        }\n      })\n    },\n\n    handle1(index, order) {\n      this.orders[index].order.status = 3\n      UpdateOrder(this.orders[index].order).then(res => {\n        console.log(res)\n        this.loadOrderList();\n        this.$message({\n          type: 'success',\n          message: '订单撤销成功!'\n        });\n      })\n    },\n\n    handle2(index, order) {\n      this.form.oid = order.id\n      this.dialogFormVisible = true\n    },\n\n    submit() {\n      CreateOrderException(this.form).then(res => {\n        if (res.success) {\n          this.$message({\n            type: 'success',\n            message: '订单异常上报成功!'\n          });\n          this.dialogFormVisible = false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.main {\n  padding: 30px;\n}\n\n.demo-table-expand {\n  font-size: 0;\n}\n\n.demo-table-expand label {\n  width: 90px;\n  color: #99a9bf;\n}\n\n.demo-table-expand .el-form-item {\n  margin-right: 0;\n  margin-bottom: 0;\n  width: 100%;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./List.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./List.vue?vue&type=template&id=8759f170&scoped=true&\"\nimport script from \"./List.vue?vue&type=script&lang=js&\"\nexport * from \"./List.vue?vue&type=script&lang=js&\"\nimport style0 from \"./List.vue?vue&type=style&index=0&id=8759f170&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8759f170\",\n  null\n  \n)\n\nexport default component.exports","import service from \"../utils/request\";\n\nexport function FindAllOrder() {\n    return service({\n        url: '/order',\n        method: 'get'\n    })\n}\n\nexport function UpdateOrder(data) {\n    return service({\n        url: '/order',\n        method: 'put',\n        data: data\n    })\n}\n\nexport function CreateOrderException(data) {\n    return service({\n        url: '/oe',\n        method: 'post',\n        data: data\n    })\n}\n\nexport function HandleOrderException(data) {\n    return service({\n        url: '/oe',\n        method: 'put',\n        data: data\n    })\n}\n\nexport function ListOrderException() {\n    return service({\n        url: '/oe',\n        method: 'get'\n    })\n}"],"sourceRoot":""}