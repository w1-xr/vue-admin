(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-470d638a"],{4329:function(t,e,r){},9163:function(t,e,r){"use strict";r("4329")},bdfa:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.orders}},[r("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[r("el-form-item",{attrs:{label:"订单ID："}},[r("span",[t._v(t._s(e.row.order.id))])]),r("el-form-item",{attrs:{label:"用户ID："}},[r("span",[t._v(t._s(e.row.user.id))])]),r("el-form-item",{attrs:{label:"电影ID："}},[r("span",[t._v(t._s(e.row.film.id))])]),r("el-form-item",{attrs:{label:"场次ID："}},[r("span",[t._v(t._s(e.row.arrangement.id))])]),r("el-form-item",{attrs:{label:"电影名："}},[r("span",[t._v("《 "+t._s(e.row.film.name)+" 》")])]),r("el-form-item",{attrs:{label:"座位号："}},[r("span",[t._v(t._s(e.row.order.seats))])]),r("el-form-item",{attrs:{label:"订单金额："}},[r("span",[t._v(t._s(e.row.order.price))])]),r("el-form-item",{attrs:{label:"下单时间："}},[r("span",[t._v(t._s(e.row.order.createAt))])]),r("el-form-item",{attrs:{label:"支付时间："}},[r("span",[t._v(t._s(e.row.order.payAt))])])],1)]}}])}),r("el-table-column",{attrs:{label:"订单 ID",width:"400",prop:"order.id"}}),r("el-table-column",{attrs:{width:"200",label:"订单金额",prop:"order.price"}}),r("el-table-column",{attrs:{label:"订单状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[2===e.row.order.status?r("el-tag",{attrs:{type:"success"}},[t._v("支付成功")]):t._e(),0===e.row.order.status?r("el-tag",{attrs:{type:"info"}},[t._v("等待支付")]):t._e(),3===e.row.order.status?r("el-tag",{attrs:{type:"warning"}},[t._v("已被撤销")]):t._e(),1===e.row.order.status?r("el-tag",{attrs:{type:"danger"}},[t._v("支付失败")]):t._e()]}}])}),r("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"small",type:"warning",icon:"el-icon-refresh-right",disabled:3===e.row.order.status,plain:""},on:{click:function(r){return t.handle1(e.$index,e.row.order)}}},[t._v("删除订单 ")])]}}])})],1),r("el-dialog",{attrs:{title:"上报异常表单",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{staticStyle:{width:"400px"},attrs:{model:t.form}},[r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"上报人","label-width":"120px"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.reason,callback:function(e){t.$set(t.form,"reason",e)},expression:"form.reason"}})],1),r("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"上报原因","label-width":"120px"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.reviewer,callback:function(e){t.$set(t.form,"reviewer",e)},expression:"form.reviewer"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("确 定")])],1)],1)],1)},a=[],s=r("f8b7"),l={data(){return{loading:!1,dialogFormVisible:!1,orders:[],form:{oid:"",reason:"",reviewer:""}}},mounted(){this.loadOrderList()},methods:{loadOrderList(){this.loading=!0,Object(s["b"])().then(t=>{t.success&&setTimeout(()=>{this.orders=t.data,this.loading=!1},700)})},handle1(t,e){this.orders[t].order.status=3,Object(s["e"])(this.orders[t].order).then(t=>{console.log(t),this.loadOrderList(),this.$message({type:"success",message:"订单撤销成功!"})})},handle2(t,e){this.form.oid=e.id,this.dialogFormVisible=!0},submit(){Object(s["a"])(this.form).then(t=>{t.success&&(this.$message({type:"success",message:"订单异常上报成功!"}),this.dialogFormVisible=!1)})}}},i=l,n=(r("9163"),r("2877")),d=Object(n["a"])(i,o,a,!1,null,"8759f170",null);e["default"]=d.exports},f8b7:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"e",(function(){return s})),r.d(e,"a",(function(){return l})),r.d(e,"c",(function(){return i})),r.d(e,"d",(function(){return n}));var o=r("b775");function a(){return Object(o["a"])({url:"/order",method:"get"})}function s(t){return Object(o["a"])({url:"/order",method:"put",data:t})}function l(t){return Object(o["a"])({url:"/oe",method:"post",data:t})}function i(t){return Object(o["a"])({url:"/oe",method:"put",data:t})}function n(){return Object(o["a"])({url:"/oe",method:"get"})}}}]);
//# sourceMappingURL=chunk-470d638a.b5c982fd.js.map