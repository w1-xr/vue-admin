(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-100e2086"],{a41a:function(e,t,a){},a7ff:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"film-list"},[a("el-dialog",{attrs:{title:"电影信息修改",visible:e.dialog1,width:"60%"},on:{"update:visible":function(t){e.dialog1=t}}},[a("el-form",{ref:"form",staticStyle:{padding:"20px"},attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"电影封面"}},[a("el-upload",{staticClass:"upload-demo",attrs:{drag:"",accept:".png,.jpg",headers:e.header,action:e.uploadAction,"on-success":e.handleUploadSuccess,multiple:""}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过50mb")])])],1),a("el-form-item",{attrs:{label:"电影名称"}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{attrs:{label:"上映地区"}},[a("el-select",{attrs:{placeholder:"请选择上映区域"},model:{value:e.form.region,callback:function(t){e.$set(e.form,"region",t)},expression:"form.region"}},[a("el-option",{attrs:{label:"中国大陆",value:"中国大陆"}}),a("el-option",{attrs:{label:"中国香港",value:"中国香港"}}),a("el-option",{attrs:{label:"中国台湾",value:"中国台湾"}}),a("el-option",{attrs:{label:"日本",value:"日本"}}),a("el-option",{attrs:{label:"美国",value:"美国"}}),a("el-option",{attrs:{label:"韩国",value:"韩国"}}),a("el-option",{attrs:{label:"英国",value:"英国"}}),a("el-option",{attrs:{label:"法国",value:"法国"}}),a("el-option",{attrs:{label:"印度",value:"印度"}}),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),a("el-form-item",{attrs:{label:"全片时长"}},[a("el-input-number",{attrs:{min:10,max:550},model:{value:e.form.duration,callback:function(t){e.$set(e.form,"duration",t)},expression:"form.duration"}})],1),a("el-form-item",{attrs:{label:"上映时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy年-MM月-dd日",placeholder:"选择日期"},model:{value:e.form.releaseTime,callback:function(t){e.$set(e.form,"releaseTime",t)},expression:"form.releaseTime"}})],1)],1),a("el-form-item",{attrs:{label:"即时上架"}},[a("el-switch",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1),a("el-form-item",{attrs:{label:"电影类型"}},[a("el-radio-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-radio",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"爱情"}}),a("el-radio",{attrs:{label:"喜剧"}}),a("el-radio",{attrs:{label:"科幻"}}),a("el-radio",{attrs:{label:"动画"}}),a("el-radio",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"恐怖"}}),a("el-radio",{attrs:{label:"悬疑"}}),a("el-radio",{attrs:{label:"冒险"}}),a("el-radio",{attrs:{label:"动作"}}),a("el-radio",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"犯罪"}}),a("el-radio",{attrs:{label:"历史"}}),a("el-radio",{attrs:{label:"古装"}}),a("el-radio",{attrs:{label:"战争"}}),a("el-radio",{attrs:{label:"纪录片"}}),a("el-radio",{staticStyle:{"padding-bottom":"20px"},attrs:{label:"家庭"}}),a("el-radio",{attrs:{label:"传记"}}),a("el-radio",{attrs:{label:"武侠"}}),a("el-radio",{attrs:{label:"儿童"}}),a("el-radio",{attrs:{label:"短片"}}),a("el-radio",{attrs:{label:"其他"}})],1)],1),a("el-form-item",{attrs:{label:"内容简介"}},[a("el-input",{attrs:{rows:"8",type:"textarea"},model:{value:e.form.introduction,callback:function(t){e.$set(e.form,"introduction",t)},expression:"form.introduction"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog1=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitUpdate()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"新增电影排片",visible:e.dialog2,width:"50%"},on:{"update:visible":function(t){e.dialog2=t}}},[a("el-form",{ref:"form",attrs:{model:e.arrangement,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"电影名称"}},[a("el-input",{attrs:{disabled:!0},model:{value:e.arrangement.name,callback:function(t){e.$set(e.arrangement,"name",t)},expression:"arrangement.name"}})],1),a("el-form-item",{attrs:{label:"开放座位"}},[a("el-input-number",{attrs:{min:10,max:100},model:{value:e.arrangement.seatNumber,callback:function(t){e.$set(e.arrangement,"seatNumber",t)},expression:"arrangement.seatNumber"}})],1),a("el-form-item",{attrs:{label:"放映类型"}},[a("el-select",{attrs:{placeholder:"请选择放映类型"},model:{value:e.arrangement.type,callback:function(t){e.$set(e.arrangement,"type",t)},expression:"arrangement.type"}},[a("el-option",{attrs:{label:"2D 放映",value:"2D放映"}}),a("el-option",{attrs:{label:"3D 放映",value:"3D放映"}})],1)],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"放映日期"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.arrangement.date,callback:function(t){e.$set(e.arrangement,"date",t)},expression:"arrangement.date"}})],1)],1),a("el-form-item",{staticStyle:{width:"500px"},attrs:{label:"放映时间"}},[a("el-col",{attrs:{span:11}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"开始时间","value-format":"HH:mm:ss"},model:{value:e.arrangement.startTime,callback:function(t){e.$set(e.arrangement,"startTime",t)},expression:"arrangement.startTime"}})],1),a("el-col",{staticClass:"line",staticStyle:{"text-align":"center"},attrs:{span:2}},[e._v("-")]),a("el-col",{attrs:{span:11}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"结束时间","value-format":"HH:mm:ss"},model:{value:e.arrangement.endTime,callback:function(t){e.$set(e.arrangement,"endTime",t)},expression:"arrangement.endTime"}})],1)],1),a("el-form-item",{attrs:{label:"电影票价"}},[a("el-input-number",{attrs:{precision:2,step:.1,max:999.99},model:{value:e.arrangement.price,callback:function(t){e.$set(e.arrangement,"price",t)},expression:"arrangement.price"}})],1),a("el-form-item",{attrs:{label:"排片人"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.arrangement.founder,callback:function(t){e.$set(e.arrangement,"founder",t)},expression:"arrangement.founder"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog2=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitArrange()}}},[e._v("确 定")])],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableLoading,expression:"tableLoading"}],staticStyle:{width:"100%"},attrs:{data:e.filmList.filter((function(t){return!e.search||t.name.toLowerCase().includes(e.search.toLowerCase())}))}},[a("el-table-column",{attrs:{label:"电影名"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"145px"},attrs:{src:t.row.cover}}),a("div",{staticStyle:{"font-size":"10px","padding-top":"5px","padding-left":"3px"}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"上映时间",prop:"releaseTime"}}),a("el-table-column",{attrs:{label:"类型",prop:"type"}}),a("el-table-column",{attrs:{label:"上架状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[!0===t.row.status?a("el-tag",{attrs:{type:"success","disable-transitions":""}},[e._v("上架")]):e._e(),!1===t.row.status?a("el-tag",{attrs:{type:"warning","disable-transitions":""}},[e._v("下架")]):e._e()]}}])}),a("el-table-column",{attrs:{label:"地区",prop:"region"}}),a("el-table-column",{attrs:{label:"电影时长"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{size:"medium",effect:"plain"}},[e._v(e._s(t.row.duration)+" 分钟")])]}}])}),a("el-table-column",{attrs:{width:"260",align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[a("el-input",{attrs:{size:"mini",placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("修改 ")]),a("el-button",{attrs:{size:"mini",icon:"el-icon-circle-plus",type:"success"},on:{click:function(a){return e.handleArrange(t.$index,t.row)}}},[e._v("排片 ")]),a("el-popconfirm",{attrs:{"confirm-button-text":"确定","cancel-button-text":"不用了",icon:"el-icon-info","icon-color":"red",title:" 确定要删除此电影吗？ "},on:{confirm:function(a){return e.handleDelete(t.$index,t.row)}}},[a("el-button",{staticStyle:{"margin-left":"8px"},attrs:{slot:"reference",size:"mini",icon:"el-icon-delete",type:"danger"},slot:"reference"},[e._v("删除 ")])],1)]}}])})],1)],1)},r=[],n=a("d0fa"),o=a("db49"),i={data(){return{header:{Authorization:localStorage.getItem("token")},uploadAction:o["a"].API_URL+"/upload",url:"",tableLoading:!1,form:{cover:"null",name:"",region:"",releaseTime:"",duration:120,introduction:"",type:"",status:!0},arrangement:{name:"",fid:"",seatNumber:40,price:30.5,date:"",startTime:"",endTime:"",founder:"",type:"2D放映"},filmList:[],search:"",dialog1:!1,dialog2:!1}},mounted(){this.tableLoading=!0,Object(n["i"])().then(e=>{setTimeout(()=>{this.filmList=e.data,this.tableLoading=!1},700)})},methods:{submitUpdate(){this.form.cover=this.url,Object(n["l"])(this.form).then(e=>{this.dialog1=!1})},submitArrange(){Object(n["a"])(this.arrangement).then(e=>{this.dialog2=!1})},handleEdit(e,t){this.dialog1=!0,this.form=t},handleArrange(e,t){this.dialog2=!0,this.arrangement.name=t.name,this.arrangement.fid=t.id},handleDelete(e,t){Object(n["f"])(t.id).then(a=>{this.filmList.splice(e,1),this.$message({message:"电影《"+t.name+"》删除成功！",type:"success"})})},handleUploadSuccess(e){this.url=e}}},s=i,c=(a("fd30"),a("2877")),u=Object(c["a"])(s,l,r,!1,null,"0076d209",null);t["default"]=u.exports},d0fa:function(e,t,a){"use strict";a.d(t,"i",(function(){return r})),a.d(t,"f",(function(){return n})),a.d(t,"b",(function(){return o})),a.d(t,"l",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"k",(function(){return c})),a.d(t,"h",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"c",(function(){return m})),a.d(t,"j",(function(){return f})),a.d(t,"d",(function(){return p})),a.d(t,"g",(function(){return b})),a.d(t,"m",(function(){return g}));var l=a("b775");function r(){return Object(l["a"])({url:"/film",method:"get"})}function n(e){return Object(l["a"])({url:"/film/"+e,method:"delete"})}function o(e){return Object(l["a"])({url:"/film",method:"post",data:e})}function i(e){return Object(l["a"])({url:"/film",method:"put",data:e})}function s(e){return Object(l["a"])({url:"/arrangement",method:"post",data:e})}function c(e){return Object(l["a"])({url:"/arrangement",method:"put",data:e})}function u(){return Object(l["a"])({url:"/arrangement",method:"get"})}function d(e){return Object(l["a"])({url:"/arrangement?id="+e,method:"delete"})}function m(e){return Object(l["a"])({url:"/poster",method:"post",data:e})}function f(){return Object(l["a"])({url:"/poster",method:"get"})}function p(){return Object(l["a"])({url:"/poster",method:"delete"})}function b(e){return Object(l["a"])({url:"/poster/"+e,method:"delete"})}function g(e){return Object(l["a"])({url:"/poster",method:"put",data:e})}},fd30:function(e,t,a){"use strict";a("a41a")}}]);
//# sourceMappingURL=chunk-100e2086.81b3557d.js.map