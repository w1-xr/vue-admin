(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f685efc"],{"20bb":function(e,t,l){"use strict";l("623c")},"623c":function(e,t,l){},b931:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"main"},[l("el-table",{staticStyle:{width:"100%"},attrs:{data:e.workerList}},[l("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[l("el-form-item",{attrs:{label:"用户名"}},[l("span",[e._v(e._s(t.row.username))])]),l("el-form-item",{attrs:{label:"昵称"}},[l("span",[e._v(e._s(t.row.nickname))])]),l("el-form-item",{attrs:{label:"密码"}},[l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.openUpdatePassword(t.row)}}},[l("i",{staticClass:"el-icon-edit"}),e._v("编辑密码 ")])],1),l("el-form-item",{attrs:{label:"联系电话"}},[l("span",[e._v(e._s(t.row.phone))])]),l("el-form-item",{attrs:{label:"性别"}},[l("span",[e._v(e._s(t.row.gender))])]),l("el-form-item",{attrs:{label:"入职部门"}},[l("span",[e._v(e._s(t.row.department))])]),l("el-form-item",{attrs:{label:"状态"}},[t.row.entry?l("span",[e._v("在职 "),l("el-button",{attrs:{type:"text"},on:{click:function(l){return e.changeEntry(t.$index,t.row)}}},[e._v("员工已离职？")])],1):l("span",{staticStyle:{color:"#f56c6c"}},[e._v("离职")])]),l("el-form-item",{attrs:{label:"更新时间"}},[l("span",[e._v(e._s(t.row.updateAt))])]),l("el-form-item",{attrs:{label:"员工头像"}},[t.row.avatar?l("a",{attrs:{target:"_blank",href:t.row.avatar}},[l("i",{staticClass:"el-icon-view"}),e._v("查看 ")]):l("span",[e._v("他还没有上传头像")])]),l("el-form-item",[l("el-button",{attrs:{disabled:!t.row.entry,type:"info",size:"small",plain:""},on:{click:function(l){return e.handleListRole(t.row)}}},[e._v("查看权限 ")]),l("el-button",{attrs:{disabled:!t.row.entry,type:"primary",size:"small",plain:""},on:{click:function(l){return e.handleAddRole(t.row)}}},[e._v("添加权限 ")]),l("el-button",{attrs:{disabled:t.row.entry,size:"small",type:"danger",plain:""},on:{click:function(l){return e.handleDeleteWork(t.$index,t.row.id)}}},[e._v("删除员工 ")])],1)],1)]}}])}),l("el-table-column",{attrs:{label:"员工 ID",width:"430",prop:"id"}}),l("el-table-column",{attrs:{label:"用户名",width:"200",prop:"username"}}),l("el-table-column",{attrs:{label:"所在部门",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",[e._v(e._s(t.row.department))])]}}])}),l("el-table-column",{attrs:{label:"联系电话",width:"240",prop:"phone"}}),l("el-table-column",{attrs:{label:"入职时间",prop:"createAt"}})],1),l("el-dialog",{attrs:{title:"员工权限",visible:e.roleDialogVisible},on:{"update:visible":function(t){e.roleDialogVisible=t}}},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.roleList}},[l("el-table-column",{attrs:{property:"value",label:"权限",width:"300"}}),l("el-table-column",{attrs:{property:"createAt",label:"创建时间",width:"300"}}),l("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-popconfirm",{attrs:{title:"确定删除权限 < "+t.row.value+" > 吗？"},on:{confirm:function(l){return e.handleDeleteRole(t.$index,t.row.id)}}},[l("el-button",{attrs:{slot:"reference",size:"small",type:"danger",icon:"el-icon-delete",plain:""},slot:"reference"},[e._v("删除")])],1)]}}])})],1)],1),l("el-dialog",{attrs:{width:"450px",title:"新增权限",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("el-form",{attrs:{model:e.addRoleForm}},[l("el-form-item",{attrs:{label:"权限列表","label-width":"120px"}},[l("el-select",{attrs:{placeholder:"请选择新增的权限"},model:{value:e.addRoleForm.value,callback:function(t){e.$set(e.addRoleForm,"value",t)},expression:"addRoleForm.value"}},e._l(e.systemRoles,(function(e,t){return l("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1)],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:e.submitAddRole}},[e._v("确 定")])],1)],1)],1)},s=[],o=l("4f94"),i={data(){return{loading:!1,addRoleForm:{wid:"",value:""},workerList:[],systemRoles:[],roleDialogVisible:!1,roleList:[],dialogFormVisible:!1}},mounted(){Object(o["g"])().then(e=>{this.workerList=e.data}),Object(o["k"])().then(e=>{this.systemRoles=e.data})},methods:{openUpdatePassword(e){this.$prompt("请输入新的密码","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(({value:t})=>{t?t.length<6?this.$message({message:"请输入不少于6位的密码",type:"danger"}):(e.password=t,Object(o["l"])(e).then(e=>{this.$message({message:"账号密码修改成功",type:"success"})})):this.$message({message:"密码不能为空",type:"danger"})}).catch(()=>{this.$message({type:"info",message:"取消修改"})})},changeEntry(e,t){this.$confirm("此操作将该员工状态永久修改为离职, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{t.entry=!1,Object(o["l"])(t).then(e=>{this.$message({type:"success",message:"员工离职成功!"})})})},handleDeleteWork(e,t){Object(o["f"])(t).then(t=>{this.workerList.splice(e,1),this.$message({type:"success",message:"员工信息删除成功!"})})},handleListRole(e){this.roleDialogVisible=!0,this.loading=!0,Object(o["i"])(e.id).then(e=>{setTimeout(()=>{this.roleList=e.data,this.loading=!1},700)})},handleDeleteRole(e,t){Object(o["e"])(t).then(t=>{!0===t.success&&(this.roleList.splice(e,1),this.$message({type:"success",message:"员工权限删除成功!"}))})},handleAddRole(e){this.dialogFormVisible=!0,this.addRoleForm.wid=e.id},submitAddRole(){Object(o["c"])(this.addRoleForm).then(e=>{e.success&&(this.dialogFormVisible=!1,this.addRoleForm.wid="",this.addRoleForm.value="",this.$message({type:"success",message:"员工权限添加成功!"}))})}}},r=i,n=(l("20bb"),l("2877")),d=Object(n["a"])(r,a,s,!1,null,"d12f6f68",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-1f685efc.6fb68a04.js.map